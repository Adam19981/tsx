var B=Object.defineProperty;var l=(u,s,e)=>s in u?B(u,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[s]=e;var n=(u,s,e)=>(l(u,typeof s!="symbol"?s+"":s,e),e);import{L as k,E as t,M as C,G as i,K as F,N as h}from"./index-6ff7cf03.js";const U="/geeker";let g;const p=()=>{g=k.service({fullscreen:!0,lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"})},b=()=>{g.close()};let o=0;const S=()=>{o===0&&p(),o++},d=()=>{o<=0||(o--,o===0&&b())};var a=(u=>(u[u.SUCCESS=200]="SUCCESS",u[u.ERROR=500]="ERROR",u[u.OVERDUE=599]="OVERDUE",u[u.TIMEOUT=1e4]="TIMEOUT",u.TYPE="success",u))(a||{});const v=u=>{switch(u){case 400:t.error("\u8BF7\u6C42\u5931\u8D25\uFF01\u8BF7\u60A8\u7A0D\u540E\u91CD\u8BD5");break;case 401:t.error("\u767B\u5F55\u5931\u6548\uFF01\u8BF7\u60A8\u91CD\u65B0\u767B\u5F55");break;case 403:t.error("\u5F53\u524D\u8D26\u53F7\u65E0\u6743\u9650\u8BBF\u95EE\uFF01");break;case 404:t.error("\u4F60\u6240\u8BBF\u95EE\u7684\u8D44\u6E90\u4E0D\u5B58\u5728\uFF01");break;case 405:t.error("\u8BF7\u6C42\u65B9\u5F0F\u9519\u8BEF\uFF01\u8BF7\u60A8\u7A0D\u540E\u91CD\u8BD5");break;case 408:t.error("\u8BF7\u6C42\u8D85\u65F6\uFF01\u8BF7\u60A8\u7A0D\u540E\u91CD\u8BD5");break;case 500:t.error("\u670D\u52A1\u5F02\u5E38\uFF01");break;case 502:t.error("\u7F51\u5173\u9519\u8BEF\uFF01");break;case 503:t.error("\u670D\u52A1\u4E0D\u53EF\u7528\uFF01");break;case 504:t.error("\u7F51\u5173\u8D85\u65F6\uFF01");break;default:t.error("\u8BF7\u6C42\u5931\u8D25\uFF01")}},D=new h,f={baseURL:"https://mock.mengxuegu.com/mock/629d727e6163854a32e8307e",timeout:a.TIMEOUT,withCredentials:!0};class A{constructor(s){n(this,"service");this.service=C.create(s),this.service.interceptors.request.use(e=>{const r=i();D.addPending(e),e.headers.noLoading||S();const c=r.token;return{...e,headers:{...e.headers,"x-access-token":c}}},e=>Promise.reject(e)),this.service.interceptors.response.use(e=>{const{data:r,config:c}=e,E=i();return D.removePending(c),d(),r.code==a.OVERDUE?(t.error(r.msg),E.setToken(""),F.replace({path:"/login"}),Promise.reject(r)):r.code&&r.code!==a.SUCCESS?(t.error(r.msg),Promise.reject(r)):r},async e=>{const{response:r}=e;return d(),e.message.indexOf("timeout")!==-1&&t.error("\u8BF7\u6C42\u8D85\u65F6\uFF01\u8BF7\u60A8\u7A0D\u540E\u91CD\u8BD5"),r&&v(r.status),window.navigator.onLine||F.replace({path:"/500"}),Promise.reject(e)})}get(s,e,r={}){return this.service.get(s,{params:e,...r})}post(s,e,r={}){return this.service.post(s,e,r)}put(s,e,r={}){return this.service.put(s,e,r)}delete(s,e,r={}){return this.service.delete(s,{params:e,...r})}}var P=new A(f);export{U as P,P as h};
